---
description: JVM
---

# JVM

### 系统卡顿分析及优化

> 连续几天，系统在某个时间段范围内会很卡顿，有时候甚至不能完成登陆

#### 问题定位

* 监控mysql指标，指标正常。
* 查询系统日志，没有明显的错误信息。
* 监控服务器，服务器CPU 高，服务器在Ful Gc

#### 问题排查

* 联系运维导出dump 文件
* 分析dump 文件，发现有个列表占用了极大内存，进而定位到具体接口

#### 问题原因

* 运营经常会在月初导出一份报表，这份报表是查询mysql表里所有数据，同时会关联其他表，用了很多冗余字段
* 先获取所有数据再进行数据导出，导致数据都在内存里，不会被回收。
* 如果数据继续增大就会直接OOM 了

#### 问题解决

* 将数据导出范围缩小为一个月内
* 改写导出方式，改为流式导出
